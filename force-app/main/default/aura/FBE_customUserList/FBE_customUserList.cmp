<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes"
                 controller="FBE_RoleUtility">

    <aura:attribute name="userList" type="List"/>
    <aura:attribute name="bNoRecordsFound" type="Boolean" default="false"/>
    <aura:attribute name="showViewAll" type="Boolean" default="false"/>
    <aura:attribute name="test" type="Boolean" default = "false"/>
     <aura:attribute name="sortOrder" type="String" default = "asc"/>
    <aura:attribute name="sortIcon" type="String" default = "utility:chevronup"/>
<aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <lightning:card  title="Last Login Report">
       
           <aura:if isTrue="{!v.bNoRecordsFound}">        
		<div class="cardMessageContainer" role="alert">
            <p class="message" style="margin: 2rem;">You haven't assigned any Users under your Role.</p>
        </div>
        <aura:set attribute="else">
        <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                <thead>
                    <tr class="slds-text-title_caps">				
                        
                    <!--    <th scope="col">
                            <div class="slds-truncate" title="User Id">UserId</div>
                        </th> -->
                        <th scope="col">
                         <div class="slds-truncate" title="Name">Name
                             <a href=""  data-index="Name" data-value="{!v.sortOrder}"  target="_self" onclick="{!c.sortData}" >
                                 <lightning:icon iconName="{!v.sortIcon}" alternativeText="Sort" size="xx-small" class="slds-p-left_x-small"/>
                             </a> 
                        </div>
                        </th>
                        
                        <th scope="col">
                            <div class="slds-truncate" title="Email">Email
                            <a href=""  data-index="Email" data-value="{!v.sortOrder}"  target="_self" onclick="{!c.sortData}" >
                                 <lightning:icon iconName="{!v.sortIcon}" alternativeText="Sort" size="xx-small" class="slds-p-left_x-small"/>
                             </a> 
                            </div>
                        </th>
                        <th scope="col">
                            <div class="slds-truncate" title="Role">Role</div>
                        </th>                        
                        <th scope="col">
                            <div class="slds-truncate" title="Last Login">Last Login</div>
                        </th>
                      </tr>
                </thead>
                <tbody>
                       <aura:iteration items="{!v.userList}" var="user" indexVar="idx">
                       <aura:if isTrue="{!lessthan(idx,5)}">
                           <tr>                            
                        <!--    <td scope="row">
                                <div class="slds-truncate" title="{!user.Id}">
                                    {!user.Id}
                                </div>
                            </td> -->
                            <td scope="row">
                                <div class="slds-truncate" title="{!user.Name}">
                                    {!user.Name}
                                </div>
                            </td>                           
                            <td scope="row">
                                <div class="slds-truncate" title="{!user.Email}">
                                    {!user.Email}
                                </div>
                            </td>  
                               <td scope="row">
                                <div class="slds-truncate" title="{!user.UserRole.Name}">
									{!user.UserRole.Name}
                                </div>
                            </td>                            
                             <td scope="row">
                                <div class="slds-truncate" title="{!user.LastLoginDate}">
								<lightning:formattedDateTime value="{!user.LastLoginDate}" 
                                                                 year="numeric" month="numeric" day="numeric" hour="2-digit" 
                                                                 minute="2-digit"/>  
                                </div>
                            </td>
                         </tr></aura:if>                        
                    </aura:iteration>
                </tbody>
            </table> 
               
            <div class="slds-card__footer">
            <aura:if isTrue="{!v.showViewAll}">
                <a class="viewAllLink" href="javascript:void(0);" onclick="{!c.navigateToViewAll}">View All </a>
            
            </aura:if> 
            </div>
               </aura:set>
        </aura:if>
    </lightning:card>

</aura:component>